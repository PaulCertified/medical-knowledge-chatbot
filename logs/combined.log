{"level":"error","message":"Failed to initialize OpenSearch: Response Error","meta":{"body":"","headers":{"access-control-allow-origin":"*","connection":"keep-alive","content-length":"323","content-type":"application/json","date":"Thu, 13 Mar 2025 17:14:31 GMT","x-amzn-requestid":"cd082e20-f04c-4e2c-9279-a1f89b8aec79"},"meta":{"aborted":false,"attempts":0,"connection":{"_openRequests":0,"deadCount":0,"headers":{},"id":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/","resurrectTimeout":0,"roles":{"data":true,"ingest":true},"status":"alive","url":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/"},"context":null,"name":"opensearch-js","request":{"id":1,"options":{},"params":{"body":null,"headers":{"user-agent":"opensearch-js/2.13.0 (darwin 24.1.0-arm64; Node.js v23.9.0)"},"method":"HEAD","path":"/medical-knowledge","querystring":"","timeout":30000}}},"statusCode":403},"name":"ResponseError","service":"medical-chatbot","stack":"ResponseError: Response Error\n    at onBody (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:426:23)\n    at IncomingMessage.onEnd (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:341:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-13 10:14:31"}
{"level":"error","message":"Failed to initialize OpenSearch: Response Error","meta":{"body":"","headers":{"access-control-allow-origin":"*","connection":"keep-alive","content-length":"323","content-type":"application/json","date":"Thu, 13 Mar 2025 17:19:00 GMT","x-amzn-requestid":"5ba9337f-3716-4d1f-8f74-66ecfc6ca790"},"meta":{"aborted":false,"attempts":0,"connection":{"_openRequests":0,"deadCount":0,"headers":{},"id":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/","resurrectTimeout":0,"roles":{"data":true,"ingest":true},"status":"alive","url":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/"},"context":null,"name":"opensearch-js","request":{"id":1,"options":{},"params":{"body":null,"headers":{"user-agent":"opensearch-js/2.13.0 (darwin 24.1.0-arm64; Node.js v23.9.0)"},"method":"HEAD","path":"/medical-knowledge","querystring":"","timeout":30000}}},"statusCode":403},"name":"ResponseError","service":"medical-chatbot","stack":"ResponseError: Response Error\n    at onBody (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:426:23)\n    at IncomingMessage.onEnd (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:341:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-13 10:19:00"}
{"level":"error","message":"Failed to initialize OpenSearch: Response Error","meta":{"body":"","headers":{"access-control-allow-origin":"*","connection":"keep-alive","content-length":"367","content-type":"application/json","date":"Thu, 13 Mar 2025 17:23:10 GMT","x-amzn-requestid":"168b0492-9121-4077-9dee-29540c01baf7"},"meta":{"aborted":false,"attempts":0,"connection":{"_openRequests":0,"deadCount":0,"headers":{},"id":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/","resurrectTimeout":0,"roles":{"data":true,"ingest":true},"status":"alive","url":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/"},"context":null,"name":"opensearch-js","request":{"id":1,"options":{},"params":{"body":"","headers":{"user-agent":"opensearch-js/3.4.0 (darwin 24.1.0-arm64; Node.js v23.9.0)"},"method":"HEAD","path":"/medical-knowledge","querystring":"","timeout":30000}}},"statusCode":403},"name":"ResponseError","service":"medical-chatbot","stack":"ResponseError: Response Error\n    at onBody (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:426:23)\n    at IncomingMessage.onEnd (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:341:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-13 10:23:10"}
{"level":"error","message":"Failed to initialize OpenSearch: Response Error","meta":{"body":"","headers":{"access-control-allow-origin":"*","connection":"keep-alive","content-length":"323","content-type":"application/json","date":"Thu, 13 Mar 2025 17:23:42 GMT","x-amzn-requestid":"71b9dbd7-c713-4b01-b49c-5b4e4a1d5477"},"meta":{"aborted":false,"attempts":0,"connection":{"_openRequests":0,"deadCount":0,"headers":{},"id":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/","resurrectTimeout":0,"roles":{"data":true,"ingest":true},"status":"alive","url":"https://search-medical-knowledge-wdou7qpkbkphfkrv75pcz27mzm.us-east-1.es.amazonaws.com/"},"context":null,"name":"opensearch-js","request":{"id":1,"options":{},"params":{"body":"","headers":{"user-agent":"opensearch-js/3.4.0 (darwin 24.1.0-arm64; Node.js v23.9.0)"},"method":"HEAD","path":"/medical-knowledge","querystring":"","timeout":30000}}},"statusCode":403},"name":"ResponseError","service":"medical-chatbot","stack":"ResponseError: Response Error\n    at onBody (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:426:23)\n    at IncomingMessage.onEnd (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@opensearch-project/opensearch/lib/Transport.js:341:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-03-13 10:23:42"}
{"level":"info","message":"Created index: medical-knowledge","service":"medical-chatbot","timestamp":"2025-03-13 10:25:38"}
{"level":"info","message":"Knowledge base initialized successfully","service":"medical-chatbot","timestamp":"2025-03-13 10:25:38"}
{"level":"info","message":"Knowledge base initialized","service":"medical-chatbot","timestamp":"2025-03-13 10:25:38"}
{"$fault":"client","$metadata":{"attempts":1,"httpStatusCode":403,"requestId":"e05081fc-2f28-4791-bf6f-2b2e45150353","totalRetryDelay":0},"level":"error","message":"Failed to generate embedding: You don't have access to the model with the specified model ID.","name":"AccessDeniedException","service":"medical-chatbot","stack":"AccessDeniedException: You don't have access to the model with the specified model ID.\n    at de_AccessDeniedExceptionRes (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@aws-sdk/client-bedrock-runtime/dist-cjs/index.js:1543:21)\n    at de_CommandError (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@aws-sdk/client-bedrock-runtime/dist-cjs/index.js:1492:19)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@smithy/middleware-serde/dist-cjs/index.js:35:20\n    at async /Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@smithy/core/dist-cjs/index.js:167:18\n    at async /Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@smithy/middleware-retry/dist-cjs/index.js:321:38\n    at async /Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22\n    at async EmbeddingService.generateEmbedding (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/src/services/embeddingService.ts:34:24)\n    at async Promise.all (index 1)\n    at async EmbeddingService.generateEmbeddings (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/src/services/embeddingService.ts:46:14)","timestamp":"2025-03-13 10:25:39"}
{"level":"info","message":"Knowledge base initialized successfully","service":"medical-chatbot","timestamp":"2025-03-13 10:28:48"}
{"level":"info","message":"Knowledge base initialized","service":"medical-chatbot","timestamp":"2025-03-13 10:28:48"}
{"level":"error","message":"Failed to bulk add documents: Bulk indexing errors: [{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'QPuNkJUBou4CZlQJOw_O'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'QfuNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'QvuNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'Q_uNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'RPuNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}}]","service":"medical-chatbot","stack":"Error: Bulk indexing errors: [{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'QPuNkJUBou4CZlQJOw_O'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'QfuNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'QvuNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'Q_uNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}},{\"type\":\"mapper_parsing_exception\",\"reason\":\"failed to parse field [embedding] of type [knn_vector] in document with id 'RPuNkJUBou4CZlQJOw_U'. Preview of field's value: 'null'\",\"caused_by\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Vector dimension mismatch. Expected: 1536, Given: 1024\"}}]\n    at OpenSearchService.bulkAddDocuments (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/src/services/openSearchService.ts:157:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async KnowledgeBaseService.addDocuments (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/src/services/knowledgeBaseService.ts:48:7)\n    at async loadMedicalData (/Users/pgipson/Library/Mobile Documents/com~apple~CloudDocs/10 Projects/ChatbotQueries/backend/src/scripts/loadMedicalData.ts:27:7)","timestamp":"2025-03-13 10:28:50"}
{"level":"info","message":"Created index: medical-knowledge","service":"medical-chatbot","timestamp":"2025-03-13 10:29:26"}
{"level":"info","message":"Knowledge base initialized successfully","service":"medical-chatbot","timestamp":"2025-03-13 10:29:26"}
{"level":"info","message":"Knowledge base initialized","service":"medical-chatbot","timestamp":"2025-03-13 10:29:26"}
{"level":"info","message":"5 documents added successfully","service":"medical-chatbot","timestamp":"2025-03-13 10:29:28"}
{"level":"info","message":"Loaded batch 1 of 2","service":"medical-chatbot","timestamp":"2025-03-13 10:29:28"}
{"level":"info","message":"5 documents added successfully","service":"medical-chatbot","timestamp":"2025-03-13 10:29:29"}
